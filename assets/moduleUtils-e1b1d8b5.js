(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();async function i(n,e,r,a,t="afterbegin",o=!0){o&&(e.innerHTML="");const c=await n(r);e.insertAdjacentHTML(t,c),a&&a(r)}function s(n){return async function(){const e=await fetch(n);if(e.ok)return await e.text()}}function w(){return new Promise((n,e)=>{try{const r="/ProjectLoL/",a=s(`${r}partials/header.html`),t=s(`${r}partials/footer.html`),o=document.getElementById("header"),c=document.getElementById("footer");Promise.all([i(a,o),i(t,c)]).then(()=>{n()}).catch(e)}catch(r){e(r)}})}function L(n){let e=document.getElementById("header-logo"),r=document.getElementById("footer-logo");e.src=`${n}images/lol-logo-fit.jpg`,r.src=`${n}images/lol-logo-fit.jpg`;let a=document.getElementById("content-form-button");a.href=`${n}writer/index.html`}function x(n){return new Promise((e,r)=>{try{const a=s("/partials/submission.html"),t=document.getElementById(n);Promise.all([i(a,t)]).then(()=>{console.log("dialog posted"),e()}).catch(r)}catch(a){r(a)}})}function M(){const n=document.getElementById("currentyear"),e=document.getElementById("lastModified");if(n){const r=new Date().getFullYear();n.textContent=r}if(e){const r=new Date(document.lastModified).toLocaleDateString();e.textContent="last modified: "+r}}async function f(n){return await(await fetch(`https://www.dnd5eapi.co/api/${n}`)).json()}async function h(n,e){const r=document.createElement("p"),a=document.createElement("p"),t=document.createElement("p"),o=document.createElement("p"),c=document.createElement("p"),d=document.createElement("p"),l=document.createElement("p"),u=document.createElement("p"),m=document.createElement("p"),p=document.createElement("p");r.innerHTML=`${n.name} Stats`,a.innerHTML=`HP: ${n.hit_points}`,t.innerHTML=`Armor Class: ${n.armor_class[0].value}`,o.innerHTML=`Speed: ${n.speed.walk}`,c.innerHTML=`Strength: ${n.strength}`,d.innerHTML=`Dexterity: ${n.dexterity}`,l.innerHTML=`Constitution: ${n.constitution}`,u.innerHTML=`Intelligence: ${n.intelligence}`,m.innerHTML=`Wisdom: ${n.wisdom}`,p.innerHTML=`Charisma: ${n.charisma}`,e.appendChild(r),e.appendChild(c),e.appendChild(a),e.appendChild(d),e.appendChild(t),e.appendChild(l),e.appendChild(o),e.appendChild(u),e.appendChild(m),e.appendChild(p)}function g(n,e){const r=document.createElement("div");r.classList.add("hover-trigger"),r.textContent=n["stat-name"];const a=document.createElement("div");a.classList.add("modal");const t=document.createElement("span");return t.classList.add("modal-content"),t.id=`hover-${n["stat-id"].split("/").pop()}`,h(e,t),a.appendChild(t),r.appendChild(a),r}async function y(n,e){const r=document.createElement("p");r.classList.add("adventure-content");for(let a of n)if(a["story-text"]&&r.appendChild(document.createTextNode(a["story-text"]+" ")),a.stat){const t=a.stat[0];try{const o=await f(t["stat-id"]),c=g(t,o);r.appendChild(c),r.appendChild(document.createTextNode(" "))}catch(o){console.error(`Failed to load stat: ${t["stat-id"]}`,o)}}e.appendChild(r)}async function v(){return await(await fetch("./json/modules.json")).json()}function C(){return new URLSearchParams(window.location.search).get("id")}async function E(n,e){document.querySelector(".campaign-header").textContent=e.name,document.querySelector(".author").textContent=`By ${e.author||"Unknown"}`,document.querySelector(".description").textContent=e.description;const r=document.querySelector(".adventure");for(let a of n.module){const t=document.createElement("div");if(a.type==="adventure-title"){const o=document.createElement("h2");o.classList.add("adventure-header"),o.textContent=a.text,t.appendChild(o)}if(a.type==="subtitle"){const o=document.createElement("h3");o.classList.add("adventure-subtitle"),o.textContent=a.text,t.appendChild(o)}if(a.type==="story"){const o=document.createElement("p");o.classList.add("adventure-content"),o.textContent=a.text,t.appendChild(o)}if(a.type==="DM-notes"){const o=document.createElement("section");o.classList.add("DM-note");const c=document.createElement("div");c.classList.add("container");const d=document.createElement("div");d.classList.add("adventure-content"),d.textContent=a.text,c.appendChild(d),o.appendChild(c),t.appendChild(o)}a["adventure-with-stat"]&&await y(a["adventure-with-stat"],t),r.appendChild(t)}}async function $(){const n=C();if(n)try{const e=await fetch("../json/modules.json");if(!e.ok)throw new Error("Modules index not found");const r=await e.json(),a=Object.values(r[0]).find(c=>c.id===n);if(!a)throw new Error("Module metadata not found");console.log(a);const t=await fetch(`../json/modules/${n}.json`);if(!t.ok)throw new Error("Module content not found");const o=await t.json();console.log(o),E(o,a)}catch(e){console.error("Error loading module:",e)}}export{x as a,M as b,L as c,$ as d,v as g,w as l};
